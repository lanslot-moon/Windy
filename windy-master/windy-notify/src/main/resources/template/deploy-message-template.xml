<?xml version="1.0" encoding="UTF-8"?>
<templates>
    <!-- è®¢å•åˆ›å»ºé€šçŸ¥æ¨¡æ¿ -->
    <template id="com.zj.master.dispatch.pipeline.listener.PublishEndListener.handleEnd" name="æµæ°´çº¿éƒ¨ç½²é€šçŸ¥">
        <!-- æ¶ˆæ¯å†…å®¹æ¨¡æ¿ -->
        <success type="markdown">
<![CDATA[
ğŸ“Œ **æµæ°´çº¿æ‰§è¡Œç»“æœé€šçŸ¥**

â–¸ **æµæ°´çº¿åç§°**: ${pipelineName}
â–¸ **æµæ°´çº¿ID**: ${pipelineId}
â–¸ **æ‰§è¡Œç±»å‹**: <#if executeType?number == 0>æ‰‹åŠ¨æ‰§è¡Œ<#else>å®šæ—¶è§¦å‘</#if>
â–¸ **å…³è”æœåŠ¡**: ${ServiceName} (${serviceId})
â–¸ **æ‰§è¡ŒçŠ¶æ€**: <#if pipelineStatus == 0><font color="green">æˆåŠŸ</font><#else><font color="red">å¤±è´¥</font></#if>
â–¸ **æµæ°´çº¿ç±»å‹**: <#if pipelineType == 0>åŸºç¡€æµæ°´çº¿<#else>é«˜çº§æµæ°´çº¿</#if>

<#if pipelineConfig.schedule??>
â° **å®šæ—¶é…ç½®**: ${pipelineConfig.schedule}
</#if>

ğŸ“‹ **é˜¶æ®µæ‰§è¡Œè¯¦æƒ…**:
<#list stageList as stage>
  â”Œâ”€ **${stage.stageName}** (<#if stage.type == 0>åŸºç¡€é˜¶æ®µ<#else>æ‰©å±•é˜¶æ®µ</#if>)
  <#list stage.nodes as node>
  â”‚  â”œâ”€ ${node.nodeName}
  â”‚  â”‚  â–¸ ç±»å‹: <#if node.type == 0>åŸºç¡€èŠ‚ç‚¹<#else>æ‰©å±•èŠ‚ç‚¹</#if>
  <#if node.configDetail.actionId??>
  â”‚  â”‚  â–¸ æ“ä½œID: ${node.configDetail.actionId}
  </#if>
  </#list>
</#list>

<#if pipelineStatus == 0>
âœ… **æ‰§è¡ŒæˆåŠŸ** ${pipelineName} å·²å…¨éƒ¨å®Œæˆ
<#else>
âŒ **æ‰§è¡Œå¤±è´¥** è¯·æ£€æŸ¥é˜¶æ®µæ‰§è¡Œè¯¦æƒ…
</#if>
]]>
        </success>


        <!-- æ¶ˆæ¯å‘é€æ¸ é“é…ç½® -->
        <channels>
            <!-- é’‰é’‰é…ç½® -->
            <channel type="we_chat">
                <webhook>https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=ea97d9c1-305d-4507-87b7-0fffdabdce</webhook>
                <timeout>5000</timeout>
                <retry>3</retry>
            </channel>
        </channels>
    </template>
</templates>